


<!DOCTYPE html>
<html>
  [/- include('head'); /]
  <body>
    <h1 class="bg-red-300 text-indigo-400">[/= title /]</h1>
    
    <div class="flex flex-col justify-center items-center mt-20">
    <h2>오늘의 할일을 적어보세요</h2>
    <form class="mt-4 mb-4" action="/todolist/addtodo" method="post">
      <input
        class="text-sm w-52 p-2 focus:bg-teal-100 focus:border-teal-400 focus:outline-teal-400"
        type="text"
        placeholder="ex) 퇴근 후 1시간 공부하기..."
        maxlength="20"
        name="title">
      <button>추가</button>
    </form>
    <ul class="w-full flex flex-col justify-center items-center">
      
      [/ todos.map((item,index) => { /]
        <li id="todo" class=" w-[30%] pl-4 flex justify-start items-center flex-row gap-4 h-8">
          <p class="flex-[0.7]">[/= item.title /]</p>
          <form class="flex-[0.1] min-w-max" action="/todolist/checkcompleted/[/= item.id /]" method="post">
            <input name="_method" type="hidden" value="PUT" />
            <input class="todo-check[/= index /]" type="checkbox"/>
          </form>
          <div class="flex-[0.2]">
          <button data-id="[/= item.id /]" class="complete-submit-button[/= index /] text-red-400 text-bold" style="display: none">완료</button>
        </div>
        </li>
        [/ }) /]
    </ul>
  </div>
  </body>


  <script>
    var todos = [/- JSON.stringify(todos) /]
    const completeCheckboxList = document.querySelectorAll("input[type='checkbox']")
    const completeSubmitButtonList = document.querySelectorAll('#todo button');

    console.log(todos);
    
    completeCheckboxList.forEach((checkbox,index) => {
      const button = completeSubmitButtonList[index];
      checkbox.addEventListener('change', () => {
        if(checkbox.checked) {
          button.style.display = 'block';
          checkbox.setAttribute('value', checkbox.checked)
          console.log(checkbox.value); 
        } else {
          button.style.display = 'none';
          checkbox.setAttribute('value', checkbox.checked)
          console.log(checkbox.value); 
        }
      })
    })

    completeSubmitButtonList.forEach((button,index) => {
      button.addEventListener('click', () => {
        // 해당 아이디 삭제
        console.log(button.getAttribute('data-id'));
        
      })
    })
    
  </script>
</html>

