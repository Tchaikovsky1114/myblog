{"version":3,"file":"todolist.bundle.js","mappings":"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","sources":["webpack://myblog/./public/javascripts/todolist.js"],"sourcesContent":["\r\nconst deleteButtonList = document.querySelectorAll('.todo .delete-button');\r\nconst allDeleteBtn = document.querySelector('#all-delete-button');\r\nconst submitAllDeleteModal = document.querySelector('#modal');\r\nconst cancelAllDeleteTodoBtn = document.querySelector('#cancel-alldelete-todo-button')\r\nconst submitAllCompletedButton = document.querySelector('#submit-all-completed-button')\r\nconst unCompletedTodoList = document.querySelector('#uncompleted-todo-list');\r\n\r\nunCompletedTodoList.addEventListener('click', (event) => {\r\n  if (event.target.matches('.todo-checkbox')) {\r\n      const checkbox = event.target;\r\n      const todo = event.target.closest('.todo');\r\n      const completeButton = todo.querySelector('.complete-button')\r\n      const deleteButton = todo.querySelector('.delete-button')\r\n    if(event.target.checked) {\r\n      completeButton.style.display = 'block';\r\n      deleteButton.style.display = 'block';\r\n      checkbox.setAttribute('value', checkbox.checked);\r\n    }\r\n    if(!event.target.checked) {\r\n      completeButton.style.display = 'none';\r\n      deleteButton.style.display = 'none';\r\n      checkbox.setAttribute('value', checkbox.checked);\r\n    }\r\n  } else if (event.target.matches('.complete-button')) {\r\n    const todo = event.target.closest('.todo');\r\n    const todoTitle = todo.querySelector('.todo-title')\r\n    const todoId = event.target.getAttribute('data-id');\r\n    todos[todoId].completed = !todos[todoId].completed;\r\n\r\n    if(todos[todoId].completed) {\r\n      todoTitle.style.textDecoration = 'line-through';\r\n      todoTitle.style.color = '#ccc';\r\n    }\r\n    if(!todos[todoId].completed) {\r\n      todoTitle.style.textDecoration = 'none'  \r\n      todoTitle.style.color = '#000';\r\n    }\r\n    console.log(todoTitle);\r\n  }\r\n});\r\n\r\n\r\nallDeleteBtn.addEventListener('click', () => {\r\n  submitAllDeleteModal.style.display = 'flex';\r\n})\r\n\r\ncancelAllDeleteTodoBtn.addEventListener('click', () => {\r\n  submitAllDeleteModal.style.display = 'none';\r\n})\r\n\r\nsubmitAllCompletedButton.addEventListener('click', () => {\r\n    const completeTodos = todos.filter((todo) => todo.completed);\r\n    if(completeTodos.length === 0) {\r\n      alert('한개 이상 완료해주세요');\r\n      return;\r\n    }    \r\n  fetch('/todolist/completetodo',\r\n      {  \r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        method:'POST',\r\n        body: JSON.stringify({\r\n          oldTodos: todos,\r\n          completeTodos,\r\n        })\r\n      })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then((data) => {\r\n        console.log('success',data);\r\n        getCompleteTodo();\r\n      })\r\n      .catch((error) => console.error(error));\r\n    \r\n})\r\n\r\nconst getCompleteTodo = () => {\r\n  fetch('/todolist/completetodo',\r\n      {  \r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        method:'GET',\r\n      })\r\n      .then((response) => {\r\n        return response.json()\r\n      })\r\n      .then((data) => {\r\n        todos = data.todos\r\n        completedTodos = data.completedTodos\r\n\r\n        // 완료한 투두 그리기\r\n        const completedList = document.querySelector('#completed-todo-list');\r\n        completedList.innerHTML = '';\r\n        completedList.innerHTML =  completedTodos.map((item) => /*html*/`\r\n        <li class=\"flex flex-row gap-4 px-4 items-baseline justify-center\">\r\n        <p class=\"text-xl\">\r\n          <span class=\"\">\r\n            ${item.title}\r\n          </span>\r\n        </p>\r\n        <p class=\"text-xs\">\r\n          <span class=\"text-gray-400\">\r\n            ${item.createdAt}\r\n          </span>\r\n        </p>\r\n      </li>\r\n        `)\r\n        .join('');\r\n        const completedListTitle = document.createElement('h3');\r\n        completedListTitle.textContent = 'My History';\r\n        completedListTitle.style.fontWeight = 'bold';\r\n        completedList.insertAdjacentElement('afterbegin',completedListTitle)\r\n\r\n        // 기존 투두 그리기\r\n        // 이벤트 위임에 문제가 됐던 이유\r\n        // 1.innerHTML 사용으로 기존에 부착한 이밴트리스너가 삭제됨.\r\n        // unCompletedTodoList.innerHTML = '';\r\n        // 이벤트 위임에 문제가 됐던 이유\r\n        // 2. 템플릿 내부 input에 todo-checkbox 클래스를 넣지 않아서 제대로 target을 찾지 못하였음.\r\n\r\n        // innerHTML을 사용하지 않으므로 자식요소를 추가하는 형식 변경\r\n        // Before.\r\n        // unCompletedTodoList.innerHTML = todos.map((todo) => /*html*/`\r\n        //   <li class=\"todo w-[30%] pl-4 flex justify-start items-center flex-row gap-4 h-12 border-b border-b-teal-400\">\r\n        //   <p class=\"todo-title flex-[0.5]\">${todo.title}</p>\r\n        //   <div class=\"flex-[0.1] min-w-max\">\r\n        //     <input class=\"todo-check${todo.id}\" type=\"checkbox\"/>\r\n        //   </div>\r\n        //   <div class=\"flex-[0.3] flex flex-row gap-2 items-center justify-around\">\r\n        //   <button data-id=\"${todo.id}\" class=\"complete-button text-indigo-400 border border-transparent hover:border-indigo-400 px-3 py-2 text-bold\" style=\"display: none\">완료</button>\r\n        //   <a href=\"/todolist/deletetodo/${todo.id}\" class=\"delete-button text-red-400 border border-transparent hover:border-red-400 px-3 py-2 text-bold\" style=\"display: none\">삭제</a>\r\n        // </div>\r\n        // </li>\r\n        // `).join('');\r\n        \r\n\r\n        // After\r\n        while(unCompletedTodoList.firstChild){\r\n          unCompletedTodoList.removeChild(unCompletedTodoList.firstChild);\r\n        }\r\n        \r\n        for(let i = 0; i < todos.length; i++) {\r\n          const newUnCompletedTodo = document.createElement('li');\r\n          newUnCompletedTodo.classList.add('todo', 'w-[30%]', 'pl-4', 'flex', 'justify-start', 'items-center', 'flex-row', 'gap-4', 'h-12', 'border-b', 'border-b-teal-400');\r\n          newUnCompletedTodo.innerHTML = /*html*/`\r\n          <p class=\"todo-title flex-[0.5]\">${todos[i].title}</p>\r\n          <div class=\"flex-[0.1] min-w-max\">\r\n          <input class=\"todo-checkbox todo-check${todos[i].id}\" type=\"checkbox\"/>\r\n        </div>\r\n        <div class=\"flex-[0.3] flex flex-row gap-2 items-center justify-around\">\r\n        <button data-id=\"${todos[i].id}\" class=\"complete-button text-indigo-400 border border-transparent hover:border-indigo-400 px-3 py-2 text-bold\" style=\"display: none\">완료</button>\r\n        <a href=\"/todolist/deletetodo/${todos[i].id}\" class=\"delete-button text-red-400 border border-transparent hover:border-red-400 px-3 py-2 text-bold\" style=\"display: none\">삭제</a>\r\n      </div>\r\n          `\r\n          unCompletedTodoList.appendChild(newUnCompletedTodo);\r\n        }\r\n      })\r\n      .catch((error) => console.error(error));\r\n}\r\n\r\n\r\n\r\n\r\n      //   const unCompletedTodos = todos.map((todo) => /*html*/`\r\n      //   <li class=\"todo w-[30%] pl-4 flex justify-start items-center flex-row gap-4 h-12 border-b border-b-teal-400\">\r\n      //   <p class=\"todo-title flex-[0.5]\">${todo.title}</p>\r\n      //   <div class=\"flex-[0.1] min-w-max\">\r\n      //   <div class=\"flex-[0.1] min-w-max\">\r\n      //     <input class=\"todo-check${todo.id}\" type=\"checkbox\"/>\r\n      //   </div>\r\n      //   <div class=\"flex-[0.3] flex flex-row gap-2 items-center justify-around\">\r\n      //   <button data-id=\"${todo.id}\" class=\"complete-button text-indigo-400 border border-transparent hover:border-indigo-400 px-3 py-2 text-bold\" style=\"display: none\">완료</button>\r\n      //   <a href=\"/todolist/deletetodo/${todo.id}\" class=\"delete-button text-red-400 border border-transparent hover:border-red-400 px-3 py-2 text-bold\" style=\"display: none\">삭제</a>\r\n      // </div>\r\n      // </li>\r\n      // `).join('');\r\n      // unCompletedTodoList.append(unCompletedTodos);\r\n        // const completeCheckboxList = document.querySelectorAll(\"input[type='checkbox']\");\r\n        // const completeButtonList = document.querySelectorAll('.todo .complete-button');\r\n        // const deleteButtonList = document.querySelectorAll('.todo .delete-button');\r\n        // completeCheckboxList.forEach((checkbox,index) => {\r\n        //   const completeButton = completeButtonList[index];\r\n        //   const deleteButton = deleteButtonList[index];\r\n        //   checkbox.addEventListener('change', () => {\r\n        //     if(checkbox.checked) {\r\n        //       completeButton.style.display = 'block';\r\n        //       deleteButton.style.display = 'block';\r\n        //       checkbox.setAttribute('value', checkbox.checked)\r\n        //     } else {\r\n        //       completeButton.style.display = 'none';\r\n        //       deleteButton.style.display = 'none';\r\n        //       checkbox.setAttribute('value', checkbox.checked)\r\n        //     }\r\n        //   })\r\n        // })\r\n        // 이 이벤트는 다시 부착할 필요가 없음\r\n        // 왜냐면, 사라지지 않았으니까..?\r\n        // 근데 위에서 다시 그렸는데.. 요소가 똑같다면.. 그리지 않는다는 것인가..?\r\n        // completeButtonList.forEach((button) => {\r\n        //   button.addEventListener('click', () => {\r\n        //     const todoId = button.getAttribute('data-id');\r\n        //     todos[todoId].completed = !todos[todoId].completed;\r\n        //     todoTitle[todoId].classList.toggle('line-through')\r\n        //     todoTitle[todoId].classList.toggle('text-gray-300')\r\n        //     console.log(todos[todoId]);\r\n        //   })\r\n        // })"],"names":["deleteButtonList","document","querySelectorAll","allDeleteBtn","querySelector","submitAllDeleteModal","cancelAllDeleteTodoBtn","submitAllCompletedButton","unCompletedTodoList","addEventListener","event","target","matches","checkbox","todo","closest","completeButton","deleteButton","checked","style","display","setAttribute","todoTitle","todoId","getAttribute","todos","completed","textDecoration","color","console","log","completeTodos","filter","length","alert","fetch","headers","method","body","JSON","stringify","oldTodos","then","response","json","data","getCompleteTodo","error","completedTodos","completedList","innerHTML","map","item","concat","title","createdAt","join","completedListTitle","createElement","textContent","fontWeight","insertAdjacentElement","firstChild","removeChild","i","newUnCompletedTodo","classList","add","id","appendChild"],"sourceRoot":""}